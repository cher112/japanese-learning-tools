# 文法 Anki 卡包计划

## 数据源
`初级1/文法.md`：25 课，约 139 个语法点

## 卡片设计（精简版）

### 只做 1 种卡片类型：识别卡

**正面**：例句（日文）+ 课号标签
**背面**：语法名称 + 中文解释（精简） + 例句翻译 + 例句音频

**助词类语法点**额外处理：正面用填空形式（助词挖空）

### 示例

**普通语法点**（如「名詞1は 名詞2です」）：
```
正面：
  [第1課]
  わたしは 会社員です。
  → この文法は？

背面：
  名詞1は 名詞2です
  助詞「は」提示主题，「です」表判断/断定
  🔊
  (我是公司职员。)
```

**助词语法点**（如「名詞も」「名詞を 動詞」）：
```
正面：
  [第1課]
  ミラーさんは 会社員です。
  グプタさん＿＿会社員です。
  → 填入助词

背面：
  名詞も（也）
  「も」用于将相同的事物作为前提加以陈述
  正解：グプタさん【も】会社員です。
  🔊
  (米勒是公司职员。古普塔也是公司职员。)
```

## Note Model 字段

| 字段 | 说明 |
|------|------|
| PatternID | `L01-01` |
| 課 | `第1課` |
| 文法名 | `名詞1は 名詞2です` |
| 解説 | 精简中文解释（1-2句） |
| 例文 | 日文例句（第一条，带 furigana） |
| 例文訳 | 中文翻译 |
| 例文音声 | TTS 纯文件名 |
| 穴埋め | 助词填空版例句（仅助词类有值，其余为空） |
| 正解 | 正确答案（如「も」，仅助词类有值） |
| 注 | 特殊注意事项 |

## 卡片模板逻辑

```
正面：
  {{課}} 标签
  if 穴埋め非空 → 显示穴埋め + "填入助词"
  else → 显示例文 + "この文法は？"

背面：
  文法名（大字）
  解説
  例文 + 音频按钮
  例文訳
  if 正解非空 → 显示正解
  注
```

## TTS
WhiteCUL 楽しい，文件名 `tts_grammar_{md5[:10]}.wav`，纯文件名存储

## Pipeline
1. `parse_grammar.py` — 解析 文法.md → `grammar_points.json`
2. `create_grammar_deck.py` — 创建 model + 导入卡片 + 生成 TTS（一个脚本搞定）
3. 复制媒体文件到 czh + 更新字段（同之前的做法）

## CSS
沿用现有 Duolingo 风格，新增文法卡专属样式（绿色主题区分词汇卡）
