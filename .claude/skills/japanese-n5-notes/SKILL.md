---
name: japanese-n5-notes
description: |
  日语N5学习笔记管理助手。用于：
  1. 从新的PDF课件中提取语法点并更新日语笔记.md
  2. 从template.md中识别并分配内容：语法→日语笔记.md，单词→Anki（通过add.py）
  3. 按照现有笔记的模块化结构（モジュール0-6）组织内容
  4. 维护统一的中日双语格式和例句风格
  5. 补充缺失的语法点（如ます/ました时态、动词变形等）
  6. 学习结束时生成学习日志到logs/目录
  7. 生成背诵手册到背诵/目录
  8. 维护课后语法速查.md（按课组织的语法速查，方便做课后题）

  触发词：
  - "更新笔记"、"补充语法"、"新课件" → 从PDF提取并更新（同时更新课后语法速查.md）
  - "整理template"、"处理template"、"分配笔记" → 从template.md识别并分配内容（语法→笔记，单词→Anki）
  - "整理笔记"、"检查笔记" → 检查笔记完整性
  - "添加语法"、"补充例句" → 手动添加内容
  - "总结今日学习"、"学习总结"、"今日log" → 生成学习日志
  - "总结背诵"、"背诵点"、"背诵手册" → 生成背诵手册
  - "更新速查"、"课后速查"、"语法速查" → 更新课后语法速查.md
version: 1.4.0
allowed-tools: Read, Write, Edit, Bash(python *), Bash(python3 *), Bash(source .venv/bin/activate *), Bash(mkdir *), Bash(ls *)
---

# 日语N5学习笔记管理助手

## 核心原则

1. **保持现有结构**：严格遵循モジュール0-6的模块化组织
2. **统一格式风格**：中日双语、罗马音、例句格式必须一致
3. **不重复添加**：检查内容是否已存在，避免重复
4. **保留用户内容**：不删除或修改用户已有的笔记内容
5. **渐进式更新**：每次只添加新内容，不重构整个文件
6. **例句精简**：每个语法点只保留1-2个典型例句，最多不超过3个
7. **使用多级标题**：用2-3级标题组织语法点，便于索引和查找

## 笔记结构

```
日语笔记.md
├── モジュール0：単語のアクセント（声调与时间日期）
├── モジュール1：助詞のまとめ（助词总结）
├── モジュール2：動詞の活用（动词变形）
│   ├── 0. 動詞のグループ（动词分类）
│   ├── 0.5. 動詞「ます形」の時制（ます形时态）
│   ├── 1. 動詞「て形」
│   ├── 2. 動詞「ない形」
│   ├── 3. 動詞「た形」
│   ├── 4. 動詞「辞書形」
│   ├── 5. 動詞「ています形」
│   ├── 6. 動詞「可能形」
│   └── 7. 動詞の丁寧体と普通体（丁寧体→普通体転換表）
├── モジュール3：形容詞と名詞文（形容词与名词句）
│   ├── 1-6. 現在/過去/修飾/接続/変化/比較
│   └── 7. 形容詞・名詞の丁寧体と普通体（丁寧体→普通体転換表）
├── モジュール4：核心文型（核心句型）
├── モジュール5：敬語と丁寧表現（敬语与礼貌表达）
├── モジュール6：その他の重要表現（其他重要表达）
├── 附録A：アクセントと数字の読み方（声调与数字读法）
│   ├── 声調の基本ルール
│   └── 数字の読み方（基本数字、百/千/万の音変化、時刻、月、日）
├── 附録B：疑問詞のまとめ（疑问词总结）
│   ├── 基本疑問詞（いつ、いくつ、どこ、だれ、どなた、何、どれ、どの、どちら、どんな）
│   ├── 疑問詞＋か（不确定）
│   ├── 疑問詞＋でも（全面肯定）
│   ├── 疑問詞＋も＋否定（全面否定）
│   └── 派生パターン一覧表
└── 附録C：文型の丁寧体・普通体対照表（句型敬体⇔普通体）
    ├── 動詞文型（て形・ない形・た形・辞書形・可能形系）
    └── 願望・感情（～たい・ほしい・～くなる・～になる）
```

## 工作流程

### 1. 从template.md识别并分配内容

**触发条件**：用户提到"整理template"、"处理template"、"分配笔记"

**步骤**：

1. **读取template.md内容**
   - 识别章节标题（如：# 2.7笔记、## 单词部分）
   - 提取所有笔记内容

2. **内容分类识别**

   **单词类内容** → 通过 **anki/add.py** 添加到 Anki：
   - 单独的名词、动词、形容词（如：にぎやか、安い、裏）
   - 包含读音标注的词汇（如：階段（かいだん））
   - 动词变形对照（如：行きます→行く）
   - 词汇辨析（如：AとBの違い、会いました vs 会いましょう）
   - 同音异义词
   - 单纯的词汇列表
   - 敬语词汇对照（如：おいくら＝いくら的敬语）
   - 标记为"单词部分"、"単語"的章节

   **Anki add.py 用法**：
   ```bash
   # 单个词：python3 anki/add.py 日文 读音 词性 中文
   python3 anki/add.py 階段 かいだん 名 "楼梯"

   # 带课号：
   python3 anki/add.py 階段 かいだん 名 "楼梯" --lesson 第15課

   # 带例句：
   python3 anki/add.py 階段 かいだん 名 "楼梯" -e "階段を上ります。"

   # 批量导入（tab分隔文件）：
   python3 anki/add.py --file /tmp/words.txt
   ```

   **词性标记规范**：名/動I/動II/動III/形/形動/副/感/接尾/連

   **批量导入文件格式**（tab分隔）：
   ```
   日文\t读音\t词性\t中文
   階段\tかいだん\t名\t楼梯
   許します\tゆるします\t動I\t原谅
   ```

   **语法类内容** → 分配到 **日语笔记.md**：
   - 句型公式（如：～ことができます）
   - 语法规则说明（如：あまり＋否定）
   - 助词用法（如：に vs で的区别）
   - 动词变形规则（系统性的）
   - 疑问词用法及派生规则（如：なに vs なん、どれ vs どの vs どちら）
   - 副词的语法搭配规则（如：あまり＋否定、なかなか＋肯定/否定）
   - 形容词变形规则（な/い形容词怎么变形）
   - 包含"用法"、"逻辑"、"公式"的内容
   - 标记为"语法部分"、"文型"的章节

   **笔记结构补充说明**：
   - 附録A：数字・時間の読み方（数字音变规则、百/千/万、時/分/月/日）
   - 附録B：疑問詞のまとめ（疑问词总结及＋か/＋でも/＋も＋否定派生）
   - 助词用法
   - 动词变形规则（系统性的）
   - 包含"用法"、"逻辑"、"公式"的内容
   - 标记为"语法部分"、"文型"的章节

3. **智能识别规则**

   **优先级判断**：
   - 如果内容同时包含单词和语法，按主要内容分类
   - 如果是词汇辨析（如：AとBの違い），归入単語補充
   - 如果是用法说明（如：～の使い方），归入日语笔记
   - 如果是例句为主，判断是否有语法点说明：
     - 有语法点 → 日语笔记
     - 纯例句/词汇 → 単語補充

   **具体分类示例（基于实际改错/笔记内容）**：

   | 内容 | 分类 | 目标 | 备注 |
   |------|------|------|------|
   | にぎやか（单独词汇） | 单词 | Anki add.py → 形動 | |
   | 安い（单独词汇） | 单词 | Anki add.py → 形 | |
   | おいくら＝いくら的敬语 | 单词 | Anki add.py → 名 | |
   | 会いました vs 会いましょう | 语法 | 日语笔记.md | モジュール4 |
   | 23800円、9時15分等读法练习 | 语法 | 日语笔记.md | 附録A |
   | あまり＋否定（语法搭配规则） | 语法 | 日语笔记.md | モジュール6 |
   | なに vs なん 的区别 | 语法 | 日语笔记.md | 附録B疑問詞 |
   | どの/どれ/どちら/どんな | 语法 | 日语笔记.md | 附録B疑問詞 |
   | な/い形容词变形规则 | 语法 | 日语笔记.md | モジュール3 |
   | ましょう没有过去式 | 语法 | 日语笔记.md | モジュール4 |

   **关键判断标准**：
   - 涉及**搭配规则**（如：あまり必须＋否定）→ 语法
   - 涉及**读法区别**（如：なに vs なん）→ 语法
   - 涉及**变形规则**（如：形容词怎么变）→ 语法
   - 涉及**单个词的意思/读音**（如：にぎやか＝热闹）→ 单词
   - 涉及**两个词的意思对比**（如：会いました vs 会いましょう）→ 单词
   - 涉及**数字/价格/时间的读法练习**→ 单词

4. **格式转换**

   **转换到Anki（单词类）**：
   - 从template.md中提取每个词的：日文、读音、词性、中文释义
   - 生成一个临时tab分隔文件（/tmp/template_words.txt），格式：
     ```
     日文\t读音\t词性\t中文
     ```
   - 然后运行批量导入：
     ```bash
     python3 anki/add.py --file /tmp/template_words.txt --lesson 補充
     ```
   - 或逐个添加（少于5个词时）：
     ```bash
     python3 anki/add.py 日文 读音 词性 中文
     ```
   - **注意**：add.py 会自动添加到两个 Profile（szmz/czh），标记「補充」，优先出现在新卡队列

   **词性映射参考**：
   | template中的描述 | add.py词性参数 |
   |-----------------|---------------|
   | 名词 | 名 |
   | 一类动词/五段动词 | 動I |
   | 二类动词/一段动词 | 動II |
   | 三类动词（する/来る） | 動III |
   | い形容词 | 形 |
   | な形容词 | 形動 |
   | 副词 | 副 |
   | 感叹词 | 感 |
   | 接续词 | 接 |

   **转换到日语笔记.md**：
   - 按照模块结构插入对应位置
   - 使用标准的3级标题格式
   - 保持1-2个例句的原则

5. **清理template.md**
   - 处理完成后，询问用户是否清空template.md
   - 或者添加"已处理"标记

### 2. 从PDF课件更新笔记

**触发条件**：用户提供新的PDF文件或提到"新课件"、"更新笔记"

**步骤**：

1. **提取PDF内容**
   ```bash
   source .venv/bin/activate && python3 << 'EOF'
   import pdfplumber
   with pdfplumber.open("第XX课.pdf") as pdf:
       for page in pdf.pages:
           text = page.extract_text()
           print(text)
   EOF
   ```

2. **识别语法点**
   - 文型（ぶんけい）标记
   - 例文（れいぶん）标记
   - 动词变形规则
   - 助词用法
   - 句型公式

3. **确定归属模块**
   - 助词相关 → モジュール1
   - 动词变形 → モジュール2（根据变形类型选择子节）
   - 形容词/名词 → モジュール3
   - 句型表达 → モジュール4
   - 敬语 → モジュール5
   - 其他 → モジュール6

   **⚠️ 跨词类拆分原则**：当一个语法点同时涉及多种词类的变形（如丁寧体→普通体），**必须拆分**，不能整体塞进一个模块：
   - 动词的变形表 → モジュール2
   - 形容词/名词的变形表 → モジュール3
   - 概念说明 + 使用场景 → モジュール4（附交叉引用到M2/M3）

   判断维度：**怎么变（変形）→ 对应词类模块** / **怎么用（使い方）→ モジュール4**

4. **检查是否已存在**
   - 使用Grep搜索关键语法点
   - 避免重复添加

5. **按格式添加内容**
   - **插入前检查**：如果新内容涉及2个以上词类的变形，先按拆分原则分配到各词类模块，不要合并到一个模块
   - 使用Edit工具精确插入
   - 保持现有格式风格

### 2. 格式规范

#### 标题格式（使用多级标题便于索引）

```markdown
# モジュールX：大标题

## X. 主要语法分类（中文说明）

### X.1 具体语法点（中文说明）（第XX课）

**日文说明（中文说明）**
```

**示例**：
```markdown
# モジュール2：動詞の活用

## 2. 動詞「ない形」（否定与义务）

### 2.1 ～ないでください（请不要...）（第17课）

**禁止の依頼（请不要...）**
```

#### 变形规则格式
```markdown
**変形ルール（变形规则）**

*   **1グループ**：规则说明
    *   例：**動詞** → **変形後**
*   **2グループ**：规则说明
    *   例：**動詞** → **変形後**
*   **3グループ**：
    *   **します** → **変形**
    *   **来(く)ます** → **変形**
```

#### 句型格式（精简例句）
```markdown
**主な文型（主要句型）**

*   **日文说明（中文说明）**
    *   公式：【文法公式】
    *   解释说明
        *   **日文例句**。（中文翻译。）
        *   **日文例句**。（中文翻译。）
```

**重要**：
- 每个语法点的例句控制在1-2个，特殊情况最多3个
- **不使用**「用法：」「逻辑：」「例句：」等标签前缀
- **保留**「公式：」标签
- 例句直接作为子弹点跟在说明后

#### 注意事项格式
```markdown
**注意事項**

*   **特殊规则**：说明
    *   ❌ **错误用法**（错误）
    *   ⭕ **正确用法**（正确）
```

### 3. 内容提取模式

从PDF中识别以下模式：

**模式1：文型（句型）**
```
文型
１ 动词て形 + ください
２ 动词て形 + います
```
→ 提取到モジュール2或モジュール4

**模式2：例文（例句）**
```
例文（れいぶん）１
日文句子。
--回答句子。
```
→ 作为例句添加

**模式3：动词变形表**
```
行きます：行かない
食べます：食べない
します：しない
```
→ 提取到モジュール2对应变形节

**模式4：助词用法**
```
助詞「に」
時間の特定
例：6時に起きます。
```
→ 提取到モジュール1

### 4. 检查笔记完整性

**检查项目**：

- [ ] ます形的四种时态（ます、ません、ました、ませんでした）
- [ ] 动词三类分类规则
- [ ] て形、ない形、た形、辞書形变形规则
- [ ] ています的三种用法
- [ ] 主要助词（は、が、を、に、で、へ、と、も、の、や、から、まで）
- [ ] い形容词和な形容词的变形
- [ ] 核心句型（愿望、比较、授受、许可禁止等）

**输出格式**：
```markdown
## 笔记完整性检查

✅ 已完成：
- ます形时态（模块2.0.5）
- 动词分类（模块2.0）
- て形变形（模块2.1）

⚠️ 需补充：
- 可能形变形（模块2.6缺失）
- 使役形（未涵盖）

📝 建议：
- 第18课涉及可能形，建议添加
```

### 4.5 语法正确性验证

**触发条件**：交叉检查、检查笔记时，除了完整性检查，还必须做内容正确性验证。

**⚠️ 核心区别**：
- **完整性检查**（4.）：检查有没有 → 缺不缺语法点
- **正确性验证**（4.5）：检查对不对 → 已有内容是否准确

**两个文件一致 ≠ 内容正确**。如果错误存在于两个文件中，一致性检查无法发现。必须独立验证内容本身。

**验证清单**：

1. **相似语法点是否混淆**
   - まで vs までに、は vs が、に vs で、ている vs てある
   - 检查方法：找到相似语法点的段落，确认解释和例句是否正确区分了它们的不同含义
   - 常见错误：把A的解释写到B下面，或把两个不同语法点合并成一个

2. **动词变形是否正确**
   - 3グループ的来る：辞書形 来(く)る、ます形 来(き)ます、ない形 来(こ)ない、て形 来(き)て、た形 来(き)た
   - 1グループ的音变：い/ち/り→って、み/び/に→んで、き→いて、ぎ→いで、し→して
   - 检查方法：逐条核对变形表中的每个变形是否正确

3. **助词使用是否正确**
   - 疑问词做主语时必须用が（❌ どれは / ⭕ どれが）
   - 移动动词（散歩する/飛ぶ/泳ぐ等）经过的场所用を而非で
   - 时间点用に、期间不用に
   - 检查方法：检查例句中的助词是否符合该语法点的规则

4. **汉字是否正确（非简体中文）**
   - 日语笔记中的日文部分必须使用日本汉字，不能用简体中文
   - 常见错误：乐→楽、学→学（这个一样）、国→国（日本也用简化）
   - 检查方法：搜索常见的中日差异汉字（乐/楽、气/気、语/語、会/会 等）

5. **例句是否匹配所属语法点**
   - 例句必须展示该语法点的用法，不能放错位置
   - 如：ない形的例句不能用て形的句子

6. **读音标注是否正确**
   - 特别注意3グループ动词「来る」的多种读音
   - 数字音变（三百→さんびゃく、六百→ろっぴゃく 等）
   - 检查方法：逐条核对括号中的假名标注

**输出格式**：
```markdown
## 语法正确性验证

❌ **发现错误**：
- [行号] [错误内容] → [正确内容]（原因）

✅ **验证通过**：
- 动词变形表：核对XX处，无误
- 助词用法：核对XX处，无误
```

### 5. 生成学习日志

**触发条件**：用户说"总结今日学习"、"学习总结"、"今日log"

**步骤**：

1. **确保logs目录存在**
   ```bash
   mkdir -p logs/
   ```

2. **回顾本次会话内容**，统计：
   - 新增/修改了哪些语法点（日语笔记.md的改动）
   - 新增/修改了哪些单词（Anki補充単語牌组的改动）
   - 处理了哪些改错/易错点
   - 用户提出的问题及解答

3. **生成日志文件**
   - 文件名：`logs/YYYY-MM-DD.md`（当天日期）
   - 如果同一天已有日志，追加内容而不是覆盖

4. **日志模板**：

```markdown
# 学习日志 YYYY-MM-DD

## 今日学习内容

### 新增语法点
- [语法点名称] → 日语笔记.md [模块位置]

### 新增单词
- [单词] （读音）意思

### 改错/易错点
- [错误内容] → [正确内容]（原因说明）

### 问答记录
- Q: [用户的问题]
- A: [简要回答]

## 今日学习量统计
- 语法点：X 个
- 单词：X 个
- 改错：X 处
```

**注意**：日志要简洁，每条只记关键信息，不需要完整例句。不要记录skill更新等非学习内容。

### 6. 生成背诵手册

**触发条件**：用户说"总结背诵"、"背诵点"、"背诵手册"

**与学习日志的区别**：
- **logs/** 是学习记录（今天做了什么，简要记录）
- **背诵/** 是背诵材料（可以直接拿来背的表格和公式，要能背诵）

**步骤**：

1. **确保背诵目录存在**
   ```bash
   mkdir -p 背诵/
   ```

2. **回顾本次会话内容**，提取所有可背诵的知识点，分类整理：
   - 数字/时间读法表
   - 疑问词表
   - 变形公式表
   - 语法公式
   - 单词表

3. **先列出所有背诵点让用户筛选**
   - 不要直接生成，先告诉用户"今天有以下背诵点，你要哪些？"
   - 用户选择后再生成文件

4. **生成背诵文件**
   - 文件名：`背诵/YYYY-MM-DD-背诵点.md`
   - 如果同一天已有文件，追加内容

5. **背诵手册格式要求**：
   - **以表格为主**，方便快速扫读和背诵
   - **不要长段文字解释**，只保留公式和关键例句
   - **音变/特殊读法加粗标注**
   - **分类清晰**，用标题分隔不同知识块

6. **背诵手册模板**：

```markdown
# 背诵手册 YYYY-MM-DD

---

## A. [分类名称]

| 项目 | 内容 |
|------|------|
| ... | ... |

---

## B. [分类名称]

| 公式 | 例 |
|------|------|
| ... | ... |

---

## C. 单词

| 日语 | 读音 | 中文 |
|------|------|------|
| ... | ... | ... |
```

### 7. 更新课后语法速查

**触发条件**：用户说"更新速查"、"课后速查"、"语法速查"，或在处理新课件时自动同步

**文件**：`课后语法速查.md`

**与日语笔记.md的区别**：
- **日语笔记.md** 按语法模块组织（助词、动词、形容词...），适合系统复习
- **课后语法速查.md** 按课号组织（第7课、第8课...），适合做课后题时快速查阅本课语法

**格式规范**：
```markdown
## 初级1 第X课

### 1. 语法点名称 — 中文含义

- 结构：**公式**（如：Vて形＋ください）
- 变形规则（如适用）：写清楚什么变成什么，列表或表格
- 意思/用法说明
- ⚠️ 注意事项/易错点（如适用）
- 例：日文例句。（中文翻译。）
- 例：否定/过去等其他形态的例句（如适用）
```

**步骤**：
1. 从PDF课件、output.md或日语笔记.md中提取该课的语法点
2. 按课件中文型的顺序排列
3. 每个语法点必须包含：
   - 结构公式（什么＋什么＋什么）
   - 变形规则（如涉及变形，必须写清楚变形方法，可用表格）
   - 中文含义
   - 注意事项/易错点（如有）
   - 1-2个典型例句（含否定/过去形态）
4. 不能省略细节，考试看的就是细节
5. 用 `------` 分隔不同课
6. 如果是新课件更新，在课后语法速查.md末尾追加新课内容

**注意**：处理新课件（"更新笔记"）时，应同时更新日语笔记.md和课后语法速查.md。

### 8. 教材管理

**教材目录结构**（可扩展）：
```
日语资料/
├── 初级1/          ← 大家的日语 初级1（第1-25课）
│   ├── output.md   ← 教材OCR文字版（千问扫描，每本默认都有）
│   ├── 第7课.pdf   ← 老师课件
│   └── ...
├── 初级2/          ← 大家的日语 初级2（第26-50课）未来
│   ├── output.md
│   └── ...
├── 中级1/          ← 未来
├── 日语笔记.md
├── 课后语法速查.md
├── anki/             ← Anki管理工具
│   ├── add.py        ← 补充单词（→ 補充単語牌组，双Profile同步）
│   ├── import_apkg.py
│   ├── sync.py
│   ├── unlock.py
│   └── update_theme.py
└── ...
```

**规则**：
- 每本教材一个文件夹，命名：`初级1/`、`初级2/`、`中级1/` 等
- 每个文件夹内必有 `output.md`（教材OCR文字版），可能有老师课件PDF
- 新教材加入时，只需创建对应文件夹并放入 `output.md`，skill即可使用
- `output.md` 中的课以 `# 第X课` 标题分隔，包含文型、例文、会話、単語、文法解説等
- OCR有噪音（重复假名表、排版信息等），需判断提取有效内容

**课件优先级**：
1. 老师课件PDF（最优先）
2. output.md 中对应课的内容（补充/兜底）

**课后语法速查.md的课号规则**：
- 按教材分区：`## 初级1 第X课`、`## 初级2 第X课`
- 新教材的课追加到文件末尾，保持教材顺序

**触发词感知**：
- "更新笔记"时，自动检测是哪本教材的哪一课
- "更新速查"时，按教材分区追加

## 使用示例

### 示例0：处理template笔记

**用户**："整理一下template里的笔记"

**执行**：
1. 读取template.md内容
2. 识别内容类型：
   - "弄ぶ / 愚弄 戏耍" → 单词 → Anki add.py
   - "そんなことがありません（反驳）" → 语法/表达 → 日语笔记.md
3. 单词类：生成 /tmp/template_words.txt，运行 `python3 anki/add.py --file /tmp/template_words.txt`
4. 语法类：按模块插入日语笔记.md
5. 询问是否清空template.md

**用户**："处理template，把语法和单词分开"

**执行**：
1. 读取template.md
2. 逐条分析内容：
   - 单词类 → 提取日文/读音/词性/中文 → Anki add.py（牌组：補充単語）
   - 语法类 → 日语笔记.md（按模块插入）
3. 生成处理报告，显示分配结果
4. 询问是否清空template.md

### 示例1：添加新课件内容

**用户**："我有第18课的PDF，帮我更新笔记"

**执行**：
1. 提取第18课.pdf内容
2. 识别新语法点（如：可能形、～ことができます）
3. 检查是否已存在
4. 使用3级标题添加到モジュール2（如：### 2.6 動詞「可能形」）
5. 每个用法只添加1-2个例句
6. 保持现有格式

### 示例2：补充缺失语法

**用户**："补充一下可能形的语法"

**执行**：
1. 检查モジュール2是否有可能形
2. 如果没有，创建新节"### 2.6 動詞「可能形」（能力与可能）"
3. 按照标准格式添加变形规则
4. 只添加1-2个典型例句
5. 更新学習項目まとめ

### 示例3：检查笔记

**用户**："检查一下我的笔记还缺什么"

**执行**：
1. 读取日语笔记.md
2. 对照N5语法大纲
3. 列出已有和缺失的语法点
4. 提供补充建议

## 特殊处理

### PDF提取注意事项

1. **文本提取**：使用pdfplumber，保留原始格式
2. **页面选择**：优先提取有"文型"、"例文"标记的页面
3. **编码处理**：正确处理日文字符
4. **表格提取**：动词变形表需要特殊处理

### 格式保持

1. **罗马音**：使用括号标注，如：**行(い)きます**
2. **强调**：使用粗体标记关键词
3. **符号**：使用全角符号（、。）
4. **缩进**：使用4空格缩进
5. **分隔线**：使用`---`分隔大节
6. **多级标题**：
   - `#` 用于模块标题（モジュール）
   - `##` 用于主要分类（如：動詞の活用）
   - `###` 用于具体语法点（如：～ないでください）
7. **例句数量**：每个语法点1-2个例句，最多3个

### 避免的操作

❌ **不要做**：
- 重新组织整个文件结构
- 删除用户已有的内容
- 修改用户的自定义注释
- 改变现有的例句
- 添加未经验证的语法点
- 添加过多例句（超过3个）
- 使用不规范的标题层级

✅ **应该做**：
- 在适当位置插入新内容
- 保持现有格式风格
- 补充缺失的语法点
- 使用3级标题（###）组织具体语法点
- 每个语法点只添加1-2个典型例句
- 更新学習項目まとめ

## 快速参考

### 常用命令

```bash
# 提取PDF内容
source .venv/bin/activate && python3 -c "import pdfplumber; ..."

# 搜索语法点
grep -n "可能形" 日语笔记.md

# 检查模块
grep "^## " 日语笔记.md
```

### 模块对应表

| 内容类型 | 归属模块 | 示例 |
|---------|---------|------|
| 助词用法 | モジュール1 | は、が、を、に |
| 动词变形/**动词的**转换表 | モジュール2 | て形、ない形、た形、丁寧体→普通体 |
| 形容词变形/**形容词·名词的**转换表 | モジュール3 | い形容词、な形容词、丁寧体→普通体 |
| 句型表达/**用法说明** | モジュール4 | ～たい、～ほしい、普通形の使い方 |
| 敬语 | モジュール5 | お～、ご～ |
| 其他 | モジュール6 | 特殊表达 |
| 句型の丁寧体⇔普通体対照 | 附録C | ～てください→～て 等 |

> **核心原则**：変形（怎么变）→ 词类模块（M2/M3） / 使い方（怎么用）→ 句型模块（M4）

## 输出格式

### 处理template.md的报告

```markdown
## Template处理报告

📋 **来源**：template.md

✅ **已添加到Anki（補充単語）**：
- 弄ぶ（もてあそぶ）→ 愚弄、戏耍
- お年玉（おとしだま）→ 红包
- 共X个词已添加到两个Profile

✅ **已分配到日语笔记.md**：
- モジュール4.X：そんなことがありません句型
- 补充例句2条

📝 **修改位置**：
- Anki 補充単語牌组：+X个词
- 日语笔记.md:XXX-XXX（新增语法点）

❓ **需要确认**：
- template.md已处理完成，是否清空？
```

### 处理PDF课件的报告

```markdown
## 更新报告

📚 **来源**：第XX课.pdf

✅ **已添加**：
- モジュール2.6：可能形变形规则
- モジュール4.8：～ことができます句型
- 补充例句3条

📝 **修改位置**：
- 日语笔记.md:456-489（新增可能形节）
- 日语笔记.md:1090（更新总结）

⚠️ **注意**：
- 第XX课还包含XX语法，但笔记中已有，未重复添加
```
